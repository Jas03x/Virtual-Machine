# Virtual-Machine

A pseudo virtual machine just for fun/experimentation. I tried to implement it as closely to a regular CPU as I could, but the main goal is for a state based 2d graphics/IO machine.

There are 3 parts so far:
  1. Machine: The virtual machine itself
  2. Compiler: This compiler compiles assembly files into code readable by the machine.
  3. Decompiler: This decompiles the machine readable code generated by the compiler into human readable assembly code.

Very experimental and untested right now. Things will change a lot as this project progresses.

---------------------------------------------------------------------------------------------------------------------------
# System information
This is the system information (registers, assembly operations, etc.). All this can be found in the system.h header.

#####Registers:
  EAX
  EBX
  ECX
  EDX
  ESP
  
#####RAM:
This machine uses 2048 integers as program memory.

#####Assembly operations:
  - NOP - Do nothing
  - INT i - Interupt with code i
  - MOV r i - Store the value i in r
  - CPY r0 r1 - copy r1's value to r0
  - ADD r0 r1 - add r1's value to r0
  - INC r i - add i to r
  - DEC r i - subtract i from r
  - SUB r0 r1 - substrct r1 from r0
  - CMP r0 r1 - compare the value of r0 to r1
  - JMP i - jump to the the i'th byte
  - JEQ i - if the last CMP operation operands were equal, jump to the i'th byte
  - JLE i - if the last CMP operation's r0 operand was less than r1, jump to the i'th byte
  - JGE i - if the last CMP operation's r0 operand was greater than r1, jump to the i'th byte
  - PUSH r - push r's value onto the stack
  - POP r - pop the stack onto r
  - GET r0 r1 - read the stack at r1 and store in r0
  - SET r0 r1 - overwrite the stack at r0 with r1
  
#####Interrupt options:
  - 1 = Exit
  - 2 = Print integer
  - 3 = Print character
  
---------------------------------------------------------------------------------------------------------------------------

#####Assembly language:
  As mentioned above, you can write programs using all the assembly commands. But some other features are:
  
  Data blocks:
    You can create chunks of read-only program data _before_ your code begins. Simply use a '{' to mark the begining of the block and add whatever data you want in between, and then end with a '}'. Make sure you put a "_CODE_:" label before beginning the code so that the compiler knows where the code begins. Additionally, it is possible to create data blocks in between the assembly code, but this is not recommended since decompiling the code will result in some parts of unreadable code. This will be fixed as the project advances.
